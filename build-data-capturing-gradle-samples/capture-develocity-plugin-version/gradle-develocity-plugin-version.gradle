/**
 * This Groovy script captures the Develocity Gradle plugin version as a custom value.
 */

def develocityApi = project.extensions.findByName('develocity')
if (!develocityApi) {
    return
}
def buildScanApi = develocityApi.getBuildScan()

URL url = buildScanApi.class.classLoader.getResource("com.gradle.scan.plugin.internal.meta.buildAgentVersion.txt")
String buildAgentVersion = url.text
buildScanApi.value("Develocity Gradle plugin version", buildAgentVersion)

