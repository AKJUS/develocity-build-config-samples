import java.nio.charset.StandardCharsets
import java.security.MessageDigest

/**
 * This Gradle script captures the system properties available to each Test task, hashes the properties' values,
 * and adds these as custom values.
 * <code> apply from: file('capture-plugin-version.gradle') </code>
 */
def buildScanApi = project.extensions.findByName('buildScan')
if (!buildScanApi) {
    return
}

URL url = com.gradle.scan.plugin.BuildScanPlugin.class.getClassLoader().getResource("com.gradle.scan.plugin.internal.meta.buildAgentVersion.txt")
String buildAgentVersion = url.getText()
buildScan.value("GE Gradle plugin version", buildAgentVersion)

